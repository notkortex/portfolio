"use strict";var Sakura=function t(e,n){var a,i,o=this;if(void 0===e)throw Error("No selector present. Define an element.");function s(t){return t[Math.floor(Math.random()*t.length)]}function r(t,e){return Math.floor(Math.random()*(e-t+1))+t}this.el=document.querySelector(e),this.settings=(a={className:"sakura",fallSpeed:1,maxSize:14,minSize:10,delay:300,gradientColorStart:"rgba(255, 183, 197, 0.9)",gradientColorEnd:"rgba(255, 197, 208, 0.9)",gradientColorDegree:120},i=n,Object.keys(a).forEach(function(t){i&&Object.prototype.hasOwnProperty.call(i,t)&&(a[t]=i[t])}),a),this.el.style.overflowX="hidden";var l=["webkit","moz","MS","o",""];function c(t,e,n){for(var a=0;a<l.length;a+=1){var i=e;l[a]||(i=e.toLowerCase()),t.addEventListener(l[a]+i,n,!1)}}function d(t){var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}this.createPetal=function(){o.el.dataset.sakuraAnimId&&setTimeout(function(){window.requestAnimationFrame(o.createPetal)},o.settings.delay);var t={blowAnimations:["blow-soft-left","blow-medium-left","blow-soft-right","blow-medium-right",],swayAnimations:["sway-0","sway-1","sway-2","sway-3","sway-4","sway-5","sway-6","sway-7","sway-8",]},e=s(t.blowAnimations),n=s(t.swayAnimations),a=(.007*document.documentElement.clientHeight+Math.round(5*Math.random()))*o.settings.fallSpeed,i=["fall ".concat(a,"s linear 0s 1"),"".concat(e," ").concat((a>30?a:30)-20+r(0,20),"s linear 0s infinite"),"".concat(n," ").concat(r(2,4),"s linear 0s infinite"),].join(", "),l=document.createElement("div");l.classList.add(o.settings.className);var m=r(o.settings.minSize,o.settings.maxSize),u=m-Math.floor(r(0,o.settings.minSize)/3);l.style.background="linear-gradient(".concat(o.settings.gradientColorDegree,"deg, ").concat(o.settings.gradientColorStart,", ").concat(o.settings.gradientColorEnd,")"),l.style.webkitAnimation=i,l.style.animation=i,l.style.borderRadius="".concat(r(o.settings.maxSize,o.settings.maxSize+Math.floor(10*Math.random())),"px ").concat(r(1,Math.floor(u/4)),"px"),l.style.height="".concat(m,"px"),l.style.left="".concat(Math.random()*document.documentElement.clientWidth-100,"px"),l.style.marginTop="".concat(-(Math.floor(20*Math.random())+15),"px"),l.style.width="".concat(u,"px"),c(l,"AnimationEnd",function(){d(l)||l.remove()}),c(l,"AnimationIteration",function(){d(l)||l.remove()}),o.el.appendChild(l)},this.el.setAttribute("data-sakura-anim-id",window.requestAnimationFrame(this.createPetal))};Sakura.prototype.start=function(){if(this.el.dataset.sakuraAnimId)throw Error("Sakura is already running.");this.el.setAttribute("data-sakura-anim-id",window.requestAnimationFrame(this.createPetal))},Sakura.prototype.stop=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.el.dataset.sakuraAnimId;n&&(window.cancelAnimationFrame(n),this.el.setAttribute("data-sakura-anim-id","")),e||setTimeout(function(){for(var e=document.getElementsByClassName(t.settings.className);e.length>0;)e[0].parentNode.removeChild(e[0])},this.settings.delay+50)};
